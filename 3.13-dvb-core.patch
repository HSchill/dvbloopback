--- drivers/media/dvb-core/dvbdev.c	2015-10-03 13:52:18.000000000 +0200
+++ drivers/media/dvb-core/dvbdev.c	2015-10-10 05:31:57.439124085 +0200
@@ -32,6 +32,7 @@
 #include <linux/fs.h>
 #include <linux/cdev.h>
 #include <linux/mutex.h>
+#include <linux/dvb/frontend.h>
 #include "dvbdev.h"
 
 static DEFINE_MUTEX(dvbdev_mutex);
@@ -68,7 +69,6 @@
 {
 	struct dvb_device *dvbdev;
 
-	mutex_lock(&dvbdev_mutex);
 	down_read(&minor_rwsem);
 	dvbdev = dvb_minors[iminor(inode)];
 
@@ -84,12 +84,10 @@
 		if (file->f_op->open)
 			err = file->f_op->open(inode,file);
 		up_read(&minor_rwsem);
-		mutex_unlock(&dvbdev_mutex);
 		return err;
 	}
 fail:
 	up_read(&minor_rwsem);
-	mutex_unlock(&dvbdev_mutex);
 	return -ENODEV;
 }
 
@@ -523,6 +521,8 @@
 	void    *mbuf = NULL;
 	void    *parg = NULL;
 	int     err  = -EINVAL;
+	struct  dtv_properties *tvps = NULL;
+	struct  dtv_property *tvp = NULL;
 
 	/*  Copy arguments into temp kernel buffer  */
 	switch (_IOC_DIR(cmd)) {
@@ -549,6 +549,23 @@
 		err = -EFAULT;
 		if (copy_from_user(parg, (void __user *)arg, _IOC_SIZE(cmd)))
 			goto out;
+		if ((cmd == FE_SET_PROPERTY) || (cmd == FE_GET_PROPERTY)) {
+		    tvps = (struct dtv_properties __user *)arg;
+		    tvp = (struct dtv_property *) kmalloc(tvps->num *
+			sizeof(struct dtv_property), GFP_KERNEL);
+		    if (!tvp){
+			err = -ENOMEM;
+			goto out;
+		    }
+		    if (copy_from_user(tvp, tvps->props, 
+			(tvps->num) * sizeof(struct dtv_property))) {
+			err = -EFAULT;
+			goto out;
+		    }
+		    tvps = (struct dtv_properties __user *)parg;
+		    tvps->props = tvp;
+		    tvp = NULL;
+		}
 		break;
 	}
 
@@ -564,6 +581,18 @@
 	{
 	case _IOC_READ:
 	case (_IOC_WRITE | _IOC_READ):
+		if ((cmd == FE_GET_PROPERTY) || (cmd == FE_SET_PROPERTY)) 
+		{
+		    tvps = (struct dtv_properties __user *)arg;
+		    tvp = tvps->props;
+		    tvps = (struct dtv_properties __user *)parg;
+		    if (copy_to_user(tvp, tvps->props, tvps->num * 
+			    sizeof(struct dtv_property))) {
+ 			err = -EFAULT;
+			goto out;
+		    }
+		    tvps->props = tvp;
+		}
 		if (copy_to_user((void __user *)arg, parg, _IOC_SIZE(cmd)))
 			err = -EFAULT;
 		break;
@@ -573,6 +602,7 @@
 	kfree(mbuf);
 	return err;
 }
+EXPORT_SYMBOL(dvb_usercopy);
 
 static int dvb_uevent(struct device *dev, struct kobj_uevent_env *env)
 {
